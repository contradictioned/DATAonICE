<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script type="text/javascript" src="jquery.min.js"></script>
</head>
<body>


<h1>Wie schnell fährt der ICE273 so?</h1>
<div id="container_speed"></div>


<h1>Wie hoch ist der ICE273 dabei?</h1>
<div id="container_height"></div>

<h2>Was ist das?</h2>
<p>Jede Minute frägt mein Laptop hier nach, was der Zug so tut: https://www.ombord.info/api/jsonp/position/. Die Messreihe wandert auf meinen Server und von dort direkt in deinen Browser.</p>

<a href="https://github.com/you"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>

<script type="text/javascript" src="highstock.js"></script>
<script>
  $(function () {

    $.getJSON('time.json', function (data) {

        speed_data = [];
        height_data = [];
        for(var idx in data) {
            var time = data[idx].time;
            var ftime = parseInt(time);
            var speed = data[idx].speed;
            var fspeed = parseFloat(speed);
            var height = data[idx].altitude;
            var fheight = parseFloat(height);
            speed_data.push([ftime, fspeed]);
            height_data.push([ftime, fheight]);
        }

        // Create the chart
        Highcharts.stockChart('container_speed', {

            rangeSelector: {
                selected: 1
            },

            title: {
                text: 'Speed'
            },

            series: [{
                name: 'Speed',
                data: speed_data,
                tooltip: {
                    valueDecimals: 2
                }
            }]
        });

        // Create the chart
        Highcharts.stockChart('container_height', {

            rangeSelector: {
                selected: 1
            },

            title: {
                text: 'Speed'
            },

            series: [{
                name: 'Speed',
                data: height_data,
                tooltip: {
                    valueDecimals: 2
                }
            }]
        });
    });

});
</script>
</body>
</html>